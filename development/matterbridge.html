

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Matterbridge &mdash; TARDIS v3.0.dev1</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/tardis_logo.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer FAQ" href="developer_faq.html" />
    <link rel="prev" title="Continuous Integration" href="continuous_integration.html" />
    <link href="../_static/tardis.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> TARDIS
          

          
          </a>

          
            
            
              <div class="version">
                3.0.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/quickstart.html">Quickstart for TARDIS</a></li>
</ul>
<p class="caption"><span class="caption-text">Using TARDIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../running/index.html">Running TARDIS</a></li>
</ul>
<p class="caption"><span class="caption-text">The Physics of TARDIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../physics/index.html">Physics overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physics/plasma/index.html">Overview of plasma calculations</a></li>
</ul>
<p class="caption"><span class="caption-text">Research with TARDIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Team &amp; Credits</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../team.html">Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../governance.html">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits &amp; Publication Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing to TARDIS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing to TARDIS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Workflow</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="running_tests.html">Running tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_workflow.html">General Workflow to add a new feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_workflow.html#preparation-and-working-with-git">Preparation and Working with Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_refdata.html">Procedure to update the reference data</a></li>
<li class="toctree-l2"><a class="reference internal" href="continuous_integration.html">Continuous Integration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Matterbridge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#slack">Slack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gitter">Gitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-server-for-the-first-time">Setting up the server for the first time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-new-gateways">Adding new gateways</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developer_faq.html">Developer FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Development Roadmap</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">tardis</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zreferences.html">TARDIS Papers and useful References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TARDIS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Developer Workflow</a> &raquo;</li>
        
      <li>Matterbridge</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/development/matterbridge.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="matterbridge">
<h1>Matterbridge<a class="headerlink" href="#matterbridge" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>We use Matterbridge to connect channels across different messaging platforms
such as Slack, Mattermost and Gitter. Matterbridge provides binaries for many
operating systems. These files are intended to be used in combination with
TOML configuration files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./matterbridge -conf config-tardis-matterbridge.toml
</pre></div>
</div>
<p>The TOML file includes all the configuration needed to connect as many
messaging platforms as you want, including tokens and passwords.</p>
<p>Currently, we keep a service running on <a class="reference external" href="http://opensupernova.org">OpenSupernova.org</a> server to keep
running Matterbridge as a daemon. Our configuration files are stored in the
private repository <code class="docutils literal notranslate"><span class="pre">tardis-matterbridge</span></code>. These files include our custom
TOML configuration file and the files needed to set up the Linux service.</p>
<p>Since this server runs Ubuntu 14.04 we use an <a class="reference external" href="https://www.digitalocean.com/community/tutorials/the-upstart-event-system-what-it-is-and-how-to-use-it">Upstart script</a> instead a
<a class="reference external" href="https://freedesktop.org/software/systemd/man/systemd.service.html">Systemd service</a> file. But a <em>Systemd</em> file is also included in
<code class="docutils literal notranslate"><span class="pre">tardis-matterbridge</span></code> repository, just in case.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Use the TOML file in <code class="docutils literal notranslate"><span class="pre">tardis-matterbridge</span></code> as an example. You can set up
as many gateways as you want.</p>
<div class="section" id="slack">
<h3>Slack<a class="headerlink" href="#slack" title="Permalink to this headline">¶</a></h3>
<p>Follow the <a class="reference external" href="https://github.com/42wim/matterbridge/wiki/Slack-bot-setup">steps for Slack in the Matterbridge wiki</a> and read carefully
<a class="reference external" href="https://github.com/42wim/matterbridge/issues/964#issuecomment-612721850">this comment</a>. Do not add any scopes manually. Copy the token to use later
in the TOML file.</p>
</div>
<div class="section" id="gitter">
<h3>Gitter<a class="headerlink" href="#gitter" title="Permalink to this headline">¶</a></h3>
<p>Create a new GitHub dedicated account to use as a bot, refer to <a class="reference external" href="https://developer.gitter.im/docs/authentication">this link</a>
and copy the token.</p>
</div>
<div class="section" id="setting-up-the-server-for-the-first-time">
<h3>Setting up the server for the first time<a class="headerlink" href="#setting-up-the-server-for-the-first-time" title="Permalink to this headline">¶</a></h3>
<p>Follow these steps to set up the server for the first time:</p>
<ol class="arabic simple">
<li><p><em>ssh</em> to <a class="reference external" href="http://opensupernova.org">OpenSupernova.org</a></p></li>
<li><p>Download the Matterbridge binary for Linux from the <a class="reference external" href="https://github.com/42wim/matterbridge/releases/latest">releases section</a></p></li>
<li><p>Make the file executable and rename it to <code class="docutils literal notranslate"><span class="pre">matterbridge</span></code></p></li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">matterbridge</span></code> executable to <code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code></p></li>
<li><p>Clone <code class="docutils literal notranslate"><span class="pre">tardis-matterbridge</span></code> repository</p></li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">config-tardis-matterbridge.toml</span></code> to <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/matterbridge/</span></code></p></li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">matterbridge.conf</span></code> to <code class="docutils literal notranslate"><span class="pre">/etc/init/</span></code></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">matterbridge</span> <span class="pre">start</span></code></p></li>
<li><p>Test your gateways</p></li>
</ol>
</div>
<div class="section" id="adding-new-gateways">
<h3>Adding new gateways<a class="headerlink" href="#adding-new-gateways" title="Permalink to this headline">¶</a></h3>
<p>After updating the TOML file, follow these steps:</p>
<ol class="arabic simple">
<li><p><em>ssh</em> to <a class="reference external" href="http://opensupernova.org">OpenSupernova.org</a></p></li>
<li><p>Copy your new <code class="docutils literal notranslate"><span class="pre">config-tardis-matterbridge.toml</span></code> to <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/matterbridge/</span></code></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">matterbridge</span> <span class="pre">restart</span></code></p></li>
<li><p>Test your gateways</p></li>
<li><p>If everything is ok, make a pull request to <code class="docutils literal notranslate"><span class="pre">tardis-matterbridge</span></code> with your new TOML file</p></li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="developer_faq.html" class="btn btn-neutral float-right" title="Developer FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="continuous_integration.html" class="btn btn-neutral float-left" title="Continuous Integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2013, TARDIS collaboration

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>